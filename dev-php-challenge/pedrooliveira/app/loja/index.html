<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"/>
    <base href="http://localhost/polvo/dev-php-challenge/pedrooliveira/app/" target="_blanks"/>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="libs/bootstrap/js/bootstrap.min.js"></script>
    <script src="libs/angularjs/angular.min.js"></script>
    <script src="libs/angularjs/angular-locale_pt-br.js"></script>
    <script src="libs/angularjs/angular-cookies.min.js"></script>
    <script src="libs/sweetalert/sweetalert.min.js"></script>

    <script src="js/module_app/app.js"></script>
    <script src="js/module_app/controllers.js"></script>
    <script src="js/module_app/services.js"></script>
    <script src="js/module_app/directives.js"></script>

    <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="painel/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="libs/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" type="text/css" href="libs/sweetalert/sweetalert.css"/>

    <title>Polvo - Loja</title>
</head>
<body ng-app="app" ng-controller="polvoProdutosControl">
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.polvo.com.br/" target="_blank">Polvo</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a ng-click="trocaAcao('produto');">Produtos</a></li>
                <li><a ng-click="trocaAcao('carrinho');">Carrinho</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
</nav>
<div ng-controller="polvoCarrinhoControl">
    <div ng-if="acao=='produto' || acao == false" class="panel panel-default" style="margin:0 auto;width: 50%">
        <div class="panel-heading">Listagem de produtos</div>
        <ul class="list-group" ng-init="pesquisa_produtos()">
            <li class="list-group-item" ng-repeat="produto in produtos">
                <h3>{{produto.nome}}</h3>
                <small>Sku: {{produto.sku_id}}</small>
                <br/>
                <h4>De: {{produto.preco_venda | currency}}</h4>
                {{produto.descricao}}
                <br/>
                <br/>
                <button type="button" class="btn btn-primary" ng-click="inserir_produto_carrinho(produto);">Add Cart</button>
            </li>
        </ul>
    </div>
    <div ng-if="acao=='carrinho'" class="panel panel-default" style="margin:0 auto;width: 90%">
        <div class="panel-heading">Listagem de produtos no carrinho</div>
        <table class="table table-hover center" ng-init="pesquisa_carrinho()">
            <thead>
                <tr>
                    <th style="width:70%;">Produtos</th>
                    <th style="width:5%;">Quantidade</th>
                    <th style="width:10%;">Valor Unitario</th>
                    <th style="width:10%;">Valor Total</th>
                    <th style="width:5%;">Remover</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="produto in carrinho">
                    <td>{{produto.nome}}<br/><small>SkuId: {{produto.sku_id}}</small></td>
                    <td><input  style="width:100%;" type="number" ng-model="produto.quantidade" ng-change="alterar_produto_carrinho(produto)" value="{{produto.quantidade}}" /></td>
                    <td>{{produto.preco_venda | currency}}</td>
                    <td>{{produto.valor_total_produto | currency}}</td>
                    <td><span class="glyphicon glyphicon-remove" ng-click="deletar_produto_carrinho(produto)"></span></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td>
                        Total compra:
                    </td>
                    <td colspan="2">
                        {{total_carrinho | currency}}
                        <br/><br/><button class="btn btn-primary pull-right" ng-controller="polvoPedidosControl" ng-click="cadastra_pedido()">Fechar Pedido</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>